{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/HBuilderProjects/rushifu/App.vue?b9a4","uni-app:///App.vue","webpack:///D:/HBuilderProjects/rushifu/App.vue?9e1d"],"names":["ossUpload","val","tempFilePath","that","this","Promise","resolve","reject","date","Date","setHours","getHours","policyText","expiration","toISOString","conditions","tiemr","address","getFullYear","getMonth","getDate","policy","Base64","encode","JSON","stringify","$api","uploadToken","res1","signature","crypto","enc","HmacSHA1","data","accessKeySecret","uni","chooseImage","count","success","res","imageSrc","tempFilePaths","console","log","str","substr","lastIndexOf","nameStr","getTime","uploadFile","url","bucket","filePath","name","formData","key","OSSAccessKeyId","accessKeyId","stsToken","statusCode","Vue","use","uView","prototype","$OSSUpload","$Base64","config","productionTip","$OSS","md5","$apikey","api","$md5","App","mpType","app","store","$mount","render","staticRenderFns","components","renderjs","component","options","__file"],"mappings":"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","file":"common/main.js","sourcesContent":["import 'uni-pages';import Vue from 'vue'\r\nimport App from './App'\r\nimport uView from \"uview-ui\";\r\nimport api from 'api/index.js';\r\nimport md5 from 'static/md5.min.js'\r\nimport store from './store';\r\nimport OSS from 'ali-oss';\r\nimport {\r\n\tBase64\r\n} from 'js-base64/base64.js';\r\nimport crypto from 'crypto-js';\r\n\r\nVue.use(uView);\r\n\r\n// 阿里云上传oss图片\r\nfunction ossUpload(val, tempFilePath = '') {\r\n\tconst that = this;\r\n\treturn new Promise(async (resolve, reject) => {\r\n\t\tconst date = new Date();\r\n\t\tdate.setHours(date.getHours() + 1);\r\n\t\tconst policyText = {\r\n\t\t\texpiration: date.toISOString(), // 设置policy过期时间。\r\n\t\t\tconditions: [\r\n\t\t\t\t// 限制上传大小。\r\n\t\t\t\t[\"content-length-range\", 0, 1024 * 1024 * 1024],\r\n\t\t\t],\r\n\t\t};\r\n\t\t\r\n\t\tlet tiemr = new Date();\r\n\t\tlet address = tiemr.getFullYear() + '' + (tiemr.getMonth() + 1) + '' + tiemr\r\n\t\t\t.getDate();\r\n\t\tconst policy = Base64.encode(JSON.stringify(policyText));\r\n\t\tconst res1 = await that.$api.uploadToken();\r\n\t\tconst signature = crypto.enc.Base64.stringify(crypto.HmacSHA1(\r\n\t\t\tpolicy, res1.data.accessKeySecret));\r\n\t\t\tsignature\r\n\t\tif (val == 'img') {\r\n\t\t\t// 上传图片\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsuccess: async function(res) {\r\n\t\t\t\t\tvar imageSrc = res.tempFilePaths[0];\r\n\t\t\t\t\tconsole.log(imageSrc)\r\n\t\t\t\t\tlet str = res.tempFilePaths[0].substr(res.tempFilePaths[0].lastIndexOf(\r\n\t\t\t\t\t\t'.'));\r\n\t\t\t\t\tlet nameStr = address + tiemr.getTime() + str;\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl: `https://${res1.data.bucket}.${res1.data.url}`, //输入你的bucketname.endpoint\r\n\t\t\t\t\t\tfilePath: imageSrc,\r\n\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\tkey: nameStr,\r\n\t\t\t\t\t\t\tpolicy: policy, // 输入你获取的的policy\r\n\t\t\t\t\t\t\tOSSAccessKeyId: res1.data.accessKeyId, // 输入你的AccessKeyId\r\n\t\t\t\t\t\t\tsignature: signature, // 输入你获取的的signature\r\n\t\t\t\t\t\t\t'x-oss-security-token': res1.data.stsToken\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\tif (res.statusCode == '204') {\r\n\t\t\t\t\t\t\t\treturn resolve(\r\n\t\t\t\t\t\t\t\t\t`https://${res1.data.bucket}.${res1.data.url}/${nameStr}`\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t} else if (val == 'voice') {\r\n\t\t\t// 上传音频\r\n\t\t\tlet str = tempFilePath.substr(tempFilePath.lastIndexOf(\r\n\t\t\t\t'.'));\r\n\t\t\tlet nameStr = address + tiemr.getTime() + str;\r\n\t\t\tuni.uploadFile({\r\n\t\t\t\turl: `https://${res1.data.bucket}.${res1.data.url}`, //输入你的bucketname.endpoint\r\n\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\tname: 'file',\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tkey: nameStr,\r\n\t\t\t\t\tpolicy: policy, // 输入你获取的的policy\r\n\t\t\t\t\tOSSAccessKeyId: res1.data.accessKeyId, // 输入你的AccessKeyId\r\n\t\t\t\t\tsignature: signature, // 输入你获取的的signature\r\n\t\t\t\t\t'x-oss-security-token': res1.data.stsToken\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.statusCode == '204') {\r\n\t\t\t\t\t\treturn resolve(\r\n\t\t\t\t\t\t\t`https://${res1.data.bucket}.${res1.data.url}/${nameStr}`)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t})\r\n\r\n}\r\n\r\nVue.prototype.$OSSUpload = ossUpload;\r\nVue.prototype.$Base64 = Base64;\r\nVue.config.productionTip = false\r\nVue.prototype.$OSS = md5\r\nVue.prototype.$apikey = \"2AA881310EF08E68659107D9D70D40A1\";\r\nVue.prototype.$api = api\r\nVue.prototype.$md5 = md5\r\nApp.mpType = 'app'\r\n\r\nconst app = new Vue({\r\n\t...App,\r\n\tstore,\r\n})\r\napp.$mount()","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"","<script>\r\n\texport default {\r\n\t\tonLaunch: function(route) {\r\n\t\t\tconsole.log(route, 'cyy11111')\r\n\t\t},\r\n\t\tonShow: function(route) {\r\n\t\t\tconsole.log(route, 'cyy11111')\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"uview-ui/index.scss\";\r\n</style>\n","import mod from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\Administrator\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}