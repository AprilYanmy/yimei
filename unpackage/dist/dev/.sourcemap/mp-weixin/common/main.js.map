{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/xingmangkeji/vue/yimei/App.vue?0900","uni-app:///App.vue","webpack:////Users/xingmangkeji/vue/yimei/App.vue?2a96","webpack:////Users/xingmangkeji/vue/yimei/App.vue?0849"],"names":["Vue","use","uView","ossUpload","val","tempFilePath","that","Promise","resolve","reject","date","Date","setHours","getHours","policyText","expiration","toISOString","conditions","tiemr","address","getFullYear","getMonth","getDate","policy","Base64","encode","JSON","stringify","$api","uploadToken","res1","signature","crypto","enc","HmacSHA1","data","accessKeySecret","uni","chooseImage","count","success","res","imageSrc","tempFilePaths","console","log","str","substr","lastIndexOf","nameStr","getTime","uploadFile","url","bucket","filePath","name","formData","key","OSSAccessKeyId","accessKeyId","stsToken","statusCode","prototype","$OSSUpload","$Base64","config","productionTip","$OSS","md5","$apikey","api","$md5","App","mpType","app","store","$mount"],"mappings":"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","file":"common/main.js","sourcesContent":["import 'uni-pages';import Vue from 'vue'\nimport App from './App'\nimport uView from \"uview-ui\";\nimport api from 'api/index.js';\nimport md5 from 'static/md5.min.js'\nimport store from './store';\nimport OSS from 'ali-oss';\nimport {\n\tBase64\n} from 'js-base64/base64.js';\nimport crypto from 'crypto-js';\n\nVue.use(uView);\n\n// 阿里云上传oss图片\nfunction ossUpload(val, tempFilePath = '') {\n\tconst that = this;\n\treturn new Promise(async (resolve, reject) => {\n\t\tconst date = new Date();\n\t\tdate.setHours(date.getHours() + 1);\n\t\tconst policyText = {\n\t\t\texpiration: date.toISOString(), // 设置policy过期时间。\n\t\t\tconditions: [\n\t\t\t\t// 限制上传大小。\n\t\t\t\t[\"content-length-range\", 0, 1024 * 1024 * 1024],\n\t\t\t],\n\t\t};\n\t\t\n\t\tlet tiemr = new Date();\n\t\tlet address = tiemr.getFullYear() + '' + (tiemr.getMonth() + 1) + '' + tiemr\n\t\t\t.getDate();\n\t\tconst policy = Base64.encode(JSON.stringify(policyText));\n\t\tconst res1 = await that.$api.uploadToken();\n\t\tconst signature = crypto.enc.Base64.stringify(crypto.HmacSHA1(\n\t\t\tpolicy, res1.data.accessKeySecret));\n\t\t\tsignature\n\t\tif (val == 'img') {\n\t\t\t// 上传图片\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsuccess: async function(res) {\n\t\t\t\t\tvar imageSrc = res.tempFilePaths[0];\n\t\t\t\t\tconsole.log(imageSrc)\n\t\t\t\t\tlet str = res.tempFilePaths[0].substr(res.tempFilePaths[0].lastIndexOf(\n\t\t\t\t\t\t'.'));\n\t\t\t\t\tlet nameStr = address + tiemr.getTime() + str;\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: `https://${res1.data.bucket}.${res1.data.url}`, //输入你的bucketname.endpoint\n\t\t\t\t\t\tfilePath: imageSrc,\n\t\t\t\t\t\tname: 'file',\n\t\t\t\t\t\tformData: {\n\t\t\t\t\t\t\tkey: nameStr,\n\t\t\t\t\t\t\tpolicy: policy, // 输入你获取的的policy\n\t\t\t\t\t\t\tOSSAccessKeyId: res1.data.accessKeyId, // 输入你的AccessKeyId\n\t\t\t\t\t\t\tsignature: signature, // 输入你获取的的signature\n\t\t\t\t\t\t\t'x-oss-security-token': res1.data.stsToken\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\tif (res.statusCode == '204') {\n\t\t\t\t\t\t\t\treturn resolve(\n\t\t\t\t\t\t\t\t\t`https://${res1.data.bucket}.${res1.data.url}/${nameStr}`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\n\t\t} else if (val == 'voice') {\n\t\t\t// 上传音频\n\t\t\tlet str = tempFilePath.substr(tempFilePath.lastIndexOf(\n\t\t\t\t'.'));\n\t\t\tlet nameStr = address + tiemr.getTime() + str;\n\t\t\tuni.uploadFile({\n\t\t\t\turl: `https://${res1.data.bucket}.${res1.data.url}`, //输入你的bucketname.endpoint\n\t\t\t\tfilePath: tempFilePath,\n\t\t\t\tname: 'file',\n\t\t\t\tformData: {\n\t\t\t\t\tkey: nameStr,\n\t\t\t\t\tpolicy: policy, // 输入你获取的的policy\n\t\t\t\t\tOSSAccessKeyId: res1.data.accessKeyId, // 输入你的AccessKeyId\n\t\t\t\t\tsignature: signature, // 输入你获取的的signature\n\t\t\t\t\t'x-oss-security-token': res1.data.stsToken\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.statusCode == '204') {\n\t\t\t\t\t\treturn resolve(\n\t\t\t\t\t\t\t`https://${res1.data.bucket}.${res1.data.url}/${nameStr}`)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t})\n\n}\n\nVue.prototype.$OSSUpload = ossUpload;\nVue.prototype.$Base64 = Base64;\nVue.config.productionTip = false\nVue.prototype.$OSS = md5\nVue.prototype.$apikey = \"2AA881310EF08E68659107D9D70D40A1\";\nVue.prototype.$api = api\nVue.prototype.$md5 = md5\nApp.mpType = 'app'\n\nconst app = new Vue({\n\t...App,\n\tstore,\n})\napp.$mount()","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","<script>\n\texport default {\n\t\tonLaunch: function(route) {\n\t\t\tconsole.log(route, 'cyy11111')\n\t\t},\n\t\tonShow: function(route) {\n\t\t\tconsole.log(route, 'cyy11111')\n\t\t},\n\t\tonHide: function() {\n\t\t\tconsole.log('App Hide')\n\t\t},\n\t}\n</script>\n\n<style lang=\"scss\">\n\t@import \"uview-ui/index.scss\";\n</style>\n","import mod from \"-!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1637218697376\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}